# üéÆ Sistema de Gamificaci√≥n - Plataforma de Cursos

## üìã Resumen

Hemos implementado un **sistema completo de gamificaci√≥n** que transforma tu plataforma de cursos en una experiencia interactiva y motivadora. Los estudiantes ahora pueden:

- üéØ **Ganar XP** por completar lecciones y quizzes
- üìà **Subir de nivel** basado en su experiencia acumulada  
- üèÜ **Desbloquear logros** por diferentes actividades
- üî• **Mantener rachas** de estudio diarias
- üëë **Competir** en leaderboards
- üìä **Seguir su progreso** detalladamente

---

## üèóÔ∏è Arquitectura del Sistema

### Backend (server/server.js)

#### **Nuevos Schemas**
```javascript
// Usuario actualizado con campos de gamificaci√≥n
userSchema: {
  xp: Number,                    // Puntos de experiencia
  level: Number,                 // Nivel actual  
  streak: Number,                // D√≠as consecutivos
  totalCoursesCompleted: Number, // Cursos completados
  totalLessonsCompleted: Number, // Lecciones completadas
  achievements: [ObjectId],      // Logros desbloqueados
  avatar: String,                // Avatar del usuario
  bio: String                    // Biograf√≠a
}

// Inscripciones de estudiantes en cursos
enrollmentSchema: {
  userId: ObjectId,              // ID del estudiante
  courseId: ObjectId,            // ID del curso
  progress: {
    completedLessons: Array,     // Lecciones completadas
    completedQuizzes: Array,     // Quizzes completados
    currentModule: Number,       // M√≥dulo actual
    currentLesson: Number        // Lecci√≥n actual
  },
  completed: Boolean,            // Curso completado
  certificateId: String          // ID del certificado
}

// Sistema de logros
achievementSchema: {
  key: String,                   // Identificador √∫nico
  title: String,                 // Nombre del logro
  description: String,           // Descripci√≥n
  icon: String,                  // Emoji o icono
  xpReward: Number,              // XP que otorga
  category: String,              // Categor√≠a (course, streak, quiz, etc.)
  rarity: String                 // Rareza (common, rare, epic, legendary)
}

// Actividad diaria del usuario
userActivitySchema: {
  userId: ObjectId,              // ID del usuario
  date: Date,                    // Fecha de la actividad
  actions: Array,                // Acciones realizadas
  totalXpEarned: Number          // XP total ganado ese d√≠a
}
```

#### **Nuevos Endpoints**

**Sistema de Progreso:**
- `POST /api/enrollment/enroll` - Inscribir usuario en curso
- `GET /api/enrollment/progress/:userId/:courseId` - Obtener progreso
- `POST /api/enrollment/complete-lesson` - Completar lecci√≥n
- `POST /api/enrollment/complete-quiz` - Completar quiz
- `POST /api/enrollment/complete-course` - Completar curso

**Sistema de Gamificaci√≥n:**
- `GET /api/user/profile/:userId` - Perfil completo con estad√≠sticas
- `POST /api/user/update-streak` - Actualizar racha de d√≠as
- `GET /api/leaderboard` - Clasificaciones (XP, cursos, rachas)
- `GET /api/user/activity/:userId` - Actividad reciente

**Sistema de Logros:**
- `POST /api/achievements/initialize` - Inicializar logros por defecto
- `GET /api/achievements` - Obtener todos los logros
- `GET /api/user/achievements/:userId` - Logros del usuario

**Otros:**
- `GET /api/user/courses/:userId` - Cursos del usuario
- `GET /api/certificate/:certificateId` - Generar certificado

---

### Frontend (React + TypeScript)

#### **Hook Principal: useUserProgress**
```typescript
// src/hooks/useUserProgress.ts
const useUserProgress = (userId: string) => {
  // Estados
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [courses, setCourses] = useState<CourseProgress[]>([]);
  const [achievements, setAchievements] = useState<Achievement[]>([]);
  
  // Acciones
  const actions = {
    enrollInCourse,
    completeLesson,
    completeQuiz,
    completeCourse,
    updateStreak,
    getCourseProgress
  };
  
  return { profile, courses, achievements, loading, error, actions };
};
```

#### **Componentes Principales**

**1. UserProfile** - `src/components/UserProfile.tsx`
- Muestra avatar, nivel, XP, racha
- Estad√≠sticas de cursos y lecciones
- Logros recientes
- Barra de progreso hacia siguiente nivel

**2. AchievementsGrid** - `src/components/AchievementsGrid.tsx`
- Grid de todos los logros disponibles
- Filtros por categor√≠a (cursos, rachas, quizzes, especiales)
- Indicadores de rareza y estado (desbloqueado/bloqueado)
- Estad√≠sticas por rareza

**3. Leaderboard** - `src/components/Leaderboard.tsx`
- Clasificaciones por XP, cursos completados, rachas
- Podio para top 3 usuarios
- Posici√≥n del usuario actual
- Avatares y estad√≠sticas

**4. CourseProgress** - `src/components/CourseProgress.tsx`
- Progreso detallado de un curso espec√≠fico
- M√≥dulos, lecciones y quizzes
- Sistema de desbloqueo progresivo
- Indicadores visuales de completado

**5. GamificationNotifications** - `src/components/GamificationNotifications.tsx`
- Notificaciones en tiempo real
- XP ganado, niveles subidos, logros desbloqueados
- Diferentes estilos seg√∫n tipo y rareza
- Auto-dismiss configurable

**6. GamificationDashboard** - `src/pages/GamificationDashboard.tsx`
- Dashboard principal que integra todos los componentes
- Pesta√±as para perfil, logros, clasificaci√≥n, cursos
- Botones de demo para testing
- Resumen r√°pido de estad√≠sticas

---

## üéØ Sistema de Puntuaci√≥n

### **Experiencia (XP)**
- **Inscripci√≥n en curso**: 10 XP
- **Completar lecci√≥n**: 25 XP
- **Completar quiz**: 50 XP (25 si no aprueba)
- **Bonus excelencia**: +25 XP (quiz con 90%+)
- **Completar curso**: 200 XP
- **Bonus curso aprobado**: +100 XP
- **Bonus puntuaci√≥n alta**: +50 XP (90%+ en examen final)

### **Niveles**
- F√≥rmula: `nivel = ‚àö(xp / 100) + 1`
- **Nivel 1**: 0-99 XP
- **Nivel 2**: 100-299 XP  
- **Nivel 3**: 300-599 XP
- **Nivel 4**: 600-999 XP
- Y as√≠ sucesivamente...

### **Rachas**
- Se incrementa por d√≠as consecutivos de actividad
- Se resetea si pasa m√°s de 1 d√≠a sin actividad
- Logros especiales por rachas de 7, 30+ d√≠as

---

## üèÜ Sistema de Logros

### **Logros por Defecto**

#### **Comunes (Common)**
- üéØ **Primer Paso** - Inscr√≠bete en tu primer curso (50 XP)
- üìö **Aprendiz** - Completa tu primera lecci√≥n (25 XP)

#### **Raros (Rare)**  
- üéì **Graduado** - Completa tu primer curso (200 XP)
- üî• **Constante** - Mant√©n una racha de 7 d√≠as (100 XP)
- ü¶â **B√∫ho Nocturno** - Completa una lecci√≥n despu√©s de las 10 PM (75 XP)
- üê¶ **Madrugador** - Completa una lecci√≥n antes de las 8 AM (75 XP)
- üîç **Buscador de Conocimiento** - Completa 100 lecciones (300 XP)

#### **√âpicos (Epic)**
- üí™ **Dedicado** - Mant√©n una racha de 30 d√≠as (500 XP)
- üß† **Maestro de Quizzes** - Obt√©n 100% en 5 quizzes (150 XP)
- üèÜ **Coleccionista** - Completa 5 cursos (1000 XP)

#### **Legendarios (Legendary)**
- üëë **Leyenda** - Completa 10 cursos (2000 XP)

### **Categor√≠as de Logros**
- **course**: Relacionados con cursos y lecciones
- **streak**: Relacionados con rachas de d√≠as
- **quiz**: Relacionados con quizzes y puntuaciones
- **special**: Logros especiales (horarios, eventos)
- **social**: Futuros logros sociales

---

## üöÄ Instalaci√≥n y Configuraci√≥n

### **1. Inicializar Logros**
```bash
# Opci√≥n 1: Desde el navegador
# Abrir consola del navegador y ejecutar:
initializeAchievements()

# Opci√≥n 2: Hacer POST request
curl -X POST http://localhost:3000/api/achievements/initialize
```

### **2. Integrar en tu App**
```tsx
// Ejemplo de uso en una p√°gina
import GamificationDashboard from '@/pages/GamificationDashboard';

function App() {
  const userId = "tu_user_id_aqui";
  
  return (
    <GamificationDashboard userId={userId} />
  );
}
```

### **3. Usar Hook en Componentes**
```tsx
import { useUserProgress } from '@/hooks/useUserProgress';

function MiComponente() {
  const { profile, actions } = useUserProgress(userId);
  
  const handleCompleteLesson = async () => {
    const result = await actions.completeLesson(courseId, moduleId, lessonId);
    if (result.success) {
      // Mostrar notificaci√≥n de XP ganado
    }
  };
}
```

---

## üìä Caracter√≠sticas Avanzadas

### **Notificaciones en Tiempo Real**
- Aparecen autom√°ticamente cuando se gana XP
- Diferentes estilos seg√∫n tipo (XP, nivel, logro)
- Animaciones especiales para logros legendarios
- Auto-dismiss configurable

### **Sistema de Progreso Inteligente**
- Desbloqueo progresivo de lecciones
- Seguimiento detallado por m√≥dulo
- C√°lculo autom√°tico de porcentajes
- Predicci√≥n de tiempo para completar

### **Leaderboards Din√°micos**
- M√∫ltiples tipos de clasificaci√≥n
- Podio visual para top 3
- Posici√≥n del usuario actual
- Actualizaci√≥n en tiempo real

### **Certificados Autom√°ticos**
- Generaci√≥n autom√°tica al completar curso
- ID √∫nico por certificado
- Datos del estudiante y curso
- Fecha y puntuaci√≥n final

---

## üé® Personalizaci√≥n

### **A√±adir Nuevos Logros**
```javascript
// En el endpoint /api/achievements/initialize
const nuevoLogro = {
  key: 'speed_learner',
  title: 'Aprendiz Veloz',
  description: 'Completa 3 lecciones en una hora',
  icon: '‚ö°',
  xpReward: 100,
  category: 'special',
  criteria: { type: 'custom', value: 3 },
  rarity: 'rare'
};
```

### **Modificar Sistema de XP**
```javascript
// En la funci√≥n addXpToUser del servidor
const xpMultiplier = 1.5; // Aumentar XP 50%
user.xp += (xpAmount * xpMultiplier);
```

### **Personalizar Niveles**
```javascript
// Cambiar f√≥rmula de c√°lculo de nivel
const calculateLevel = (xp) => {
  return Math.floor(xp / 500) + 1; // Cada 500 XP = 1 nivel
};
```

---

## üîß Testing y Demo

### **Funciones de Demo Incluidas**
- Bot√≥n "Demo: Completar Lecci√≥n" - Simula completar una lecci√≥n
- Bot√≥n "Demo: Desbloquear Logro" - Simula desbloquear un logro aleatorio
- Datos de ejemplo en `public/course-example.json`

### **Testing Manual**
1. Inscribirse en un curso
2. Completar lecciones y ver XP aumentar
3. Verificar que se desbloquean logros
4. Comprobar leaderboard
5. Probar notificaciones

---

## üìà Pr√≥ximas Mejoras

### **Funcionalidades Futuras**
- ü§ù **Sistema social**: Seguir amigos, grupos de estudio
- üéÅ **Recompensas**: Canjear XP por beneficios
- üìÖ **Desaf√≠os diarios**: Objetivos diarios/semanales
- üèÖ **Torneos**: Competencias temporales
- üì± **Notificaciones push**: Recordatorios de estudio
- üéØ **Metas personalizadas**: Objetivos definidos por el usuario

### **Optimizaciones T√©cnicas**
- Cache de leaderboards
- Compresi√≥n de datos de actividad
- √çndices de base de datos optimizados
- API rate limiting

---

## üéâ ¬°Listo para Usar!

Tu plataforma de cursos ahora tiene un **sistema de gamificaci√≥n completo y profesional**. Los estudiantes estar√°n m√°s motivados, comprometidos y tendr√°n una experiencia de aprendizaje mucho m√°s rica e interactiva.

### **Archivos Principales Creados:**
- ‚úÖ Backend: Schemas, endpoints, l√≥gica de gamificaci√≥n
- ‚úÖ Hook: `useUserProgress.ts` 
- ‚úÖ Componentes: UserProfile, AchievementsGrid, Leaderboard, etc.
- ‚úÖ Dashboard: P√°gina completa integrada
- ‚úÖ Notificaciones: Sistema en tiempo real
- ‚úÖ Documentaci√≥n: Gu√≠a completa de uso

**¬°Disfruta de tu nueva plataforma gamificada! üöÄ** 